<!DOCTYPE html>
<html lang="pt-BR" translate="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="google" content="notranslate" />
  <title>NC - Mensagens</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <header class="nc-header">
      <h1>NC</h1>
      <p class="tagline">Mensagens instantâneas com criptografia ponta a ponta</p>
      <div id="user-bar" class="hidden">
        <span id="user-name"></span>
        <button type="button" id="btn-logout">Sair</button>
      </div>
    </header>

    <main>
      <!-- Tela: Entrada de email (registro ou login) -->
      <section id="screen-email" class="screen">
        <h2>Entrar ou cadastrar</h2>
        <form id="form-email">
          <label for="input-email">Email</label>
          <input type="email" id="input-email" placeholder="seu@email.com" required />
          <button type="submit">Continuar</button>
          <div class="error-msg hidden"></div>
        </form>
      </section>

      <!-- Tela: Código de verificação -->
      <section id="screen-code" class="screen hidden">
        <h2>Verificação</h2>
        <p>Enviamos um código de 6 dígitos para <strong id="code-email"></strong></p>
        <form id="form-code">
          <label for="input-code">Código</label>
          <input type="text" id="input-code" placeholder="000000" maxlength="6" pattern="[0-9]{6}" required />
          <input type="hidden" id="input-name" />
          <button type="submit">Verificar</button>
          <div class="error-msg hidden"></div>
        </form>
      </section>

      <!-- Tela: Nome (só no registro) -->
      <section id="screen-name" class="screen hidden">
        <h2>Como quer ser chamado?</h2>
        <form id="form-name">
          <label for="input-name-reg">Nome</label>
          <input type="text" id="input-name-reg" placeholder="Seu nome" required minlength="2" />
          <button type="submit">Criar conta</button>
          <div class="error-msg hidden"></div>
        </form>
        <p style="margin-top: 1rem; text-align: center;">
          <button type="button" id="btn-restart" class="btn-secondary">← Recomeçar do início</button>
        </p>
      </section>

      <!-- Tela: Lista de conversas / Início -->
      <section id="screen-home" class="screen hidden">
        <div class="home-header">
          <h2>Conversas</h2>
          <button type="button" id="btn-new-chat" class="btn-fab">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
          </button>
        </div>
        <div class="home-search">
          <input type="text" id="search-user" placeholder="Buscar conversas..." />
        </div>
        <div id="conversation-list"></div>
      </section>

      <!-- Tela: Chat -->
      <section id="screen-chat" class="screen hidden">
        <div class="chat-header">
          <button type="button" id="btn-back-chat" class="btn-back">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
          </button>
          <div class="chat-avatar">
            <div class="avatar-circle" id="chat-avatar"></div>
          </div>
          <div class="chat-title">
            <span id="chat-with-name"></span>
            <span id="chat-status" class="status">Online</span>
          </div>
        </div>
        <div id="messages-container" class="chat-background">
          <ul id="messages-list"></ul>
        </div>
        <form id="form-send" class="send-form">
          <input type="hidden" id="chat-recipient-id" />
          <button type="button" class="btn-attach">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
            </svg>
          </button>
          <input type="text" id="input-message" placeholder="Mensagem" autocomplete="off" />
          <button type="submit" class="btn-send">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
          </button>
        </form>
      </section>
    </main>

    <footer class="nc-footer">
      <p>NC — XMPP · MMS · Push · Criptografia ponta a ponta</p>
    </footer>
  </div>

  <!-- Modal personalizado -->
  <div id="nc-modal" class="modal-overlay hidden">
    <div class="modal-container">
      <div class="modal-header">
        <h3 id="modal-title">Nova Conversa</h3>
      </div>
      <div class="modal-body">
        <p id="modal-message"></p>
        <input type="text" id="modal-input" class="modal-input" placeholder="" />
      </div>
      <div class="modal-footer">
        <button type="button" id="modal-cancel" class="btn-modal btn-secondary-modal">Cancelar</button>
        <button type="button" id="modal-ok" class="btn-modal btn-primary-modal">OK</button>
      </div>
    </div>
  </div>

  <script src="e2e.js"></script>
  <script src="app.js"></script>
</body>
</html>
